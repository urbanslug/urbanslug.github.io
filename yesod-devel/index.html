<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="referrer" content="no-referrer">

        <!-- Enable responsiveness on mobile devices-->
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />

        <title>yesod-devel | Mostly Programming</title>
<meta property="og:title" content="yesod-devel | Mostly Programming" />
<meta name="twitter:title" content="yesod-devel | Mostly Programming" />

        

        <meta property="og:site_name" content="Mostly Programming" />
        <meta property="og:url" content="https:&#x2F;&#x2F;blog.njagi.me" />

        


        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https:&#x2F;&#x2F;blog.njagi.me&#x2F;base.css" />
        <link rel="stylesheet" href="https:&#x2F;&#x2F;blog.njagi.me&#x2F;style.css">
        <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro&display=swap" rel="stylesheet">
        <link href="https:&#x2F;&#x2F;blog.njagi.me&#x2F;fontawesome&#x2F;fontawesome.css" rel="stylesheet">
        <link href="https:&#x2F;&#x2F;blog.njagi.me&#x2F;fontawesome&#x2F;brands.css" rel="stylesheet">
        <link href="https:&#x2F;&#x2F;blog.njagi.me&#x2F;fontawesome&#x2F;solid.css" rel="stylesheet">

        <link rel='icon' type='image/x-icon' href="https:&#x2F;&#x2F;blog.njagi.me&#x2F;favicon.ico" />

        

        

    </head>
    <body>
        <a href="#main" class="skip-link p-screen-reader-text">Skip to content</a>
        

        
        <div id="taxonomy-header"></div>
        

        <main id="main" class="l-main">
            
<article class="p-article">
  <header>
    <a id="home-link" href="https:&#x2F;&#x2F;blog.njagi.me"><i class="fas fa-home"></i> Mostly Programming</a>
    <h1 id="page-title">yesod-devel</h1>
        <div>
            <div class="c-time">

              <time datetime="2015-07-19">
                Jul 19, 2015
              </time>
              
               - (4 min read)
            </div>
        </div>
    </header>
    
    <section id="js-article" class="p-article__body">
        
    <p>A new development server is upon us. It's name is yesod-devel.<br />
This post is about yesod-devel which is my Google Summer of Code project and not the current yesod-devel that is part of the yesod framework. It's not yet available and is still under development, meaning a lot of things in this post may change.</p>
<span id="continue-reading"></span>
<p>yesod-devel is a development server for haskell web applications that are <a href="https://www.yesodweb.com/book/web-application-interface">WAI</a> compliant.</p>
<h1 id="what-we-expect-from-the-application">What we expect from the application.<a class="zola-anchor" href="#what-we-expect-from-the-application" aria-label="Anchor link for: what-we-expect-from-the-application"><i class="fas fa-link"></i></a> 
</h1>
<p>This is my opinion of what <strong>I</strong> expect from the web application and this may therefore change depending on what the community thinks. I think this design is good and losely coupled and leaves a lot of freedom to the web application.</p>
<p>At the heart of your application (the root of your web application) we expect you to have an <code>Application.hs</code> file which holds the Appliaction module. This is the file pointed to by your <code>main-is</code> section of the .cabal file.:</p>
<p>This Application.hs file holds the <code>main</code> function which fires up a <a href="http://hackage.haskell.org/package/warp"><code>warp</code></a> server at a an address and port specified in an environment variable.
Yesod devel will read everything it needs from the web application from environment variables and not from a config file.<br />
It is the responsibility of the web application to set environment variables(setEnv). This way yesod-devel is very losely coupled to the web application. That is, we(yesod-devel) will not have to specify the names, paths of your config files or which serialization format it will use.</p>
<p>The environment variables we currently need are:</p>
<pre style="background-color:#f5f5f5;">
<code><span style="color:#5597d6;">haskellWebAddress</span><span style="color:#72ab00;">=</span><span style="color:#d07711;">&quot;&lt;ip_address&gt;/localhost&quot;
</span><span style="color:#5597d6;">haskellWebPort</span><span style="color:#72ab00;">=</span><span style="color:#d07711;">&quot;&lt;port_number&gt;&quot;
</span></code></pre><h1 id="what-you-should-expect-from-yesod-devel">What you should expect from yesod-devel.<a class="zola-anchor" href="#what-you-should-expect-from-yesod-devel" aria-label="Anchor link for: what-you-should-expect-from-yesod-devel"><i class="fas fa-link"></i></a> 
</h1>
<h4 id="automatic-source-and-data-file-discovery">Automatic source and data file discovery.<a class="zola-anchor" href="#automatic-source-and-data-file-discovery" aria-label="Anchor link for: automatic-source-and-data-file-discovery"><i class="fas fa-link"></i></a> 
</h4>
<p>You shouldn't expect to tell yesod-devel where your source files or data files (hamelet files and so forth) are as long as your web application knows where everything is. All you need to do is call the yesod-devel binary inside your app's root.</p>
<h4 id="building-and-running-your-code">Building and running your code.<a class="zola-anchor" href="#building-and-running-your-code" aria-label="Anchor link for: building-and-running-your-code"><i class="fas fa-link"></i></a> 
</h4>
<p>yesod-devel when run in your web application's working directory will run build and run your application on localhost:3000.</p>
<h4 id="automatic-code-reloading">Automatic code reloading.<a class="zola-anchor" href="#automatic-code-reloading" aria-label="Anchor link for: automatic-code-reloading"><i class="fas fa-link"></i></a> 
</h4>
<p>Yesod-devel supports automatic code reloading for any file modified in the current working directory. This is more proof of just how losely coupled yesod-devel will be from your application.</p>
<p>Newly added files don't trigger a recompile and neither do deleted files. However, file modifications do trigger a recompile.
This is a deliberate design choice. Text editors as well as other programs keep adding and removing files from the file system and if we listened for any randomly created file or deleted file to trigger a recompile we would end up triggering useless recompiles.</p>
<p>This however means there's a trade-off. For being so losely coupled we have to manually restart yesod-devel everytime we add or delete files.</p>
<h4 id="reverse-proxying">Reverse proxying.<a class="zola-anchor" href="#reverse-proxying" aria-label="Anchor link for: reverse-proxying"><i class="fas fa-link"></i></a> 
</h4>
<p>Yesod-devel will start listening on the address and port specified in your environment variables <code>haskellWebAddress</code> and <code>haskellWebPort</code> respectively and reverse proxy it to your <strong>localhost:3000</strong>.</p>
<h4 id="report-error-messages-to-the-browser">Report error messages to the browser.<a class="zola-anchor" href="#report-error-messages-to-the-browser" aria-label="Anchor link for: report-error-messages-to-the-browser"><i class="fas fa-link"></i></a> 
</h4>
<p>Yesod-devel will report error messages from ghc to the web browser on localhost:3000.</p>
<h4 id="command-line-arguments">Command line arguments.<a class="zola-anchor" href="#command-line-arguments" aria-label="Anchor link for: command-line-arguments"><i class="fas fa-link"></i></a> 
</h4>
<p>Currently yesod-devel takes no command line arguments.</p>
<p>However, in the plans are the following.</p>
<ul>
<li>--configure-with <config flags to cabal configure></li>
<li>--no-reverse-proxying</li>
<li>--show-iface fileName.hs</li>
</ul>
<p>You should be fine without passing any of these arguments unless you have a special reason to.</p>
<p>Currently yesod-devel will configure your web application with the following flags to cabal.</p>
<ul>
<li>-flibrary-only</li>
<li>--disable-tests&quot;</li>
<li>--disable-benchmarks&quot;</li>
<li>-fdevel</li>
<li>--disable-library-profiling</li>
<li>--with-ld=yesod-ld-wrapper</li>
<li>--with-ghc=yesod-ghc-wrapper</li>
<li>--with-ar=yesod-ar-wrapper</li>
<li>--with-hc-pkg=ghc-pkg</li>
</ul>
<p>I assume that these arguments are self explanatory.</p>


    </section>
    <footer>
      <hr>
      <div>
        
        <div class="post-tags">
          <p>Tags:
            
            <a href="https:&#x2F;&#x2F;blog.njagi.me&#x2F;tags&#x2F;programming-gsoc-yesod-yesod-devel&#x2F;">Programming, GSoC, Yesod, Yesod-Devel, </a>
            
          </p>
        </div>
        

        
      </div>
        <nav class="c-pagination p-pagination">
            <div class="c-pagination__ctrl">
                <div class="c-pagination__newer">
                    <a href="https:&#x2F;&#x2F;blog.njagi.me&#x2F;google-summer-of-code-2015&#x2F;">Google Summer of Code (2015)</a>
                </div>
                <div class="c-pagination__older">
                    <a href="https:&#x2F;&#x2F;blog.njagi.me&#x2F;what-is-a-runtime-system-haskell&#x2F;">A Runtime System</a>
                </div>
            </div>
        </nav>
    </footer>
</article>
        </main>

        <footer class="l-footer">
          <div id="socials">
            <span class="social-item"><i class="fab fa-github"></i><a target="_blank" href="https://github.com/urbanslug">urbanslug</a></span>
            <span class="social-item"><i class="fab fa-twitter"></i><a target="_blank" href="https://twitter.com/urbanslug">urbanslug</a></span>
          </div>
          <p class="p-copyright">
              
              
    All work is under the terms of the <a href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License, Version 1.3</a>

          </p>
      </footer>

      
      <link rel="stylesheet" href="https:&#x2F;&#x2F;blog.njagi.me&#x2F;css&#x2F;katex.min.css">
      <script defer src="https:&#x2F;&#x2F;blog.njagi.me&#x2F;js&#x2F;katex.min.js"></script>
      <script defer src="https:&#x2F;&#x2F;blog.njagi.me&#x2F;js&#x2F;mathtex-script-type.min.js"></script>
    </body>
</html>
